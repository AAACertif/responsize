var e=this;function f(b,a){var c=b.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===a?d=d[g]?d[g]:d[g]={}:d[g]=a};function k(){this.J=window.ce.api.CloudExplorer.get("ce-js")}f("FileService",k);k.prototype.open=function(){var b=this;return new Promise(function(a,c){b.J.pick(function(b){console.log("my Blob: "+JSON.stringify(b));a(b)},function(a){console.log("error "+JSON.stringify(a));c(a)})})};k.prototype.open=k.prototype.open;function l(b){this.element=b;this.b=b.getElementsByTagName("iframe")[0];this.height=this.width=1;this.s=!0;window.addEventListener("resize",this.d.bind(this))}f("Stage",l);l.prototype.G=function(b,a){this.s=!1;this.width=b;this.height=a;this.d()};l.prototype.setSize=l.prototype.G;
l.prototype.t=function(){for(var b=null,a=null,c=null,d=null,g=this.b.contentDocument.querySelectorAll("*"),q=0;q<g.length;q++){var h=g[q];if(null===b||h.offsetLeft<b)b=h.offsetLeft;if(null===c||h.offsetTop<c)c=h.offsetTop;h.offsetLeft+h.offsetWidth>a&&(a=h.offsetLeft+h.offsetWidth);h.offsetTop+h.offsetHeight>d&&(d=h.offsetTop+h.offsetHeight)}return{V:a-b,O:d-c}};l.prototype.getContentSize=l.prototype.t;
l.prototype.d=function(){if(this.s){var b=this.t();this.width=b.V;this.height=b.O}this.b.style.width=this.width+"px";this.b.style.height=this.height+"px";var b=this.element.offsetWidth,a=this.element.offsetHeight,c=Math.min(1,b/this.width,a/this.height);this.b.style.transform="scale("+c+")";this.b.style.transformOrigin="0 0";a=(a-this.height*c)/2;this.b.style.left=(b-this.width*c)/2+"px";this.b.style.top=a+"px"};l.prototype.redraw=l.prototype.d;
l.prototype.H=function(b){var a=this;return new Promise(function(c,d){a.b.onload=function(){return c(a.b.contentDocument)};a.b.onerror=function(a){return d(a)};a.b.src=b;a.d()})};l.prototype.setUrl=l.prototype.H;l.prototype.S=function(b){var a=this;return new Promise(function(c,d){a.b.onload=function(){a.b.onload=c(a.b.contentDocument);a.b.src="";a.b.contentDocument.write(b);a.d()};a.b.onerror=function(a){return d(a)};a.b.src="about:blank"})};l.prototype.setHtml=l.prototype.S;f("Device",{X:0,Y:1,Z:2,$:3,W:4});var m=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];f("DeviceData",m);
function n(b){var a=this;this.element=b;this.element.querySelector(".open");this.R=this.element.querySelector(".save");this.selection=[];this.n=this.C=this.m=null;this.element.addEventListener("click",function(b){var d=b.target;d.classList.contains("open")&&a.m&&a.m();d.classList.contains("save")?(a.R.classList.add("off"),a.C&&a.C()):d.classList.contains("mobile")?a.f(0):d.classList.contains("mobile-h")?a.f(1):d.classList.contains("tablet")?a.f(2):d.classList.contains("desktop")&&a.f(4);b.preventDefault();
return!1})}f("Toolbar",n);n.prototype.f=function(b){for(var a=this.element.querySelectorAll(".selected"),c=0;c<a.length;c++)a.item(c).classList.remove("selected");this.element.querySelector("."+m[b].name).classList.add("selected");this.n&&this.n(m[b].width,m[b].height)};n.prototype.setDevice=n.prototype.f;n.prototype.o=function(b){this.selection=b;this.d()};n.prototype.setSelection=n.prototype.o;n.prototype.d=function(){};n.prototype.redraw=n.prototype.d;function p(){this.c=null;this.l=this.k=!1}f("RszSelection",p);p.prototype.reset=function(b){this.k=!1;this.e(b).forEach(function(a){r(a)})};function s(b,a,c,d){b.k=!1;if(b.l)b.l=!1;else return d||b.e(a).forEach(function(a){a!=c&&r(a)}),b.select(c),!0;return!1}p.prototype.e=function(b){if(b){for(var a=b.querySelectorAll(".rsz-selected"),c=[],d=0;d<a.length;d++)c.push(a[d]);b.classList.contains(".rsz-selected")&&c.push(b);return c}return[]};p.prototype.getSelected=p.prototype.e;
p.prototype.select=function(b,a){b.classList.contains("rsz-selected")||(b.classList.add("rsz-selected"),!1!==a&&this.c&&this.c())};function r(b){b.classList.contains("rsz-selected")&&b.classList.remove("rsz-selected")};function t(){this.c=null;this.i=!1;this.h=this.a=this.r=null;this.v=this.P.bind(this);this.A=this.B.bind(this);this.w=this.Q.bind(this);this.D=this.B.bind(this);this.selection=new p}f("Wysiwyg",t);t.prototype.T=function(b){return this.selection.c=b};t.prototype.setOnSelect=t.prototype.T;t.prototype.L=function(){return this.selection.c};t.prototype.getOnSelect=t.prototype.L;t.prototype.U=function(b){return this.h=b};t.prototype.setSelectFilter=t.prototype.U;t.prototype.M=function(){return this.h};
t.prototype.getSelectFilter=t.prototype.M;t.prototype.q=function(b){console.log("setStyleUrl",b);this.r=b;if(this.a){var a=this.a.querySelector("#rsz-stylesheet");b?(a||(a=document.createElement("link"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("id","rsz-stylesheet"),this.a.firstChild?this.a.insertBefore(a,this.a.firstChild):this.a.appendChild(a)),a.setAttribute("href",b)):a&&this.a.removeChild(a)}};t.prototype.setStyleUrl=t.prototype.q;t.prototype.N=function(){return this.r};
t.prototype.getStyleUrl=t.prototype.N;
t.prototype.F=function(b){if(this.a){this.a.removeEventListener("mousedown",this.v);this.a.removeEventListener("mouseup",this.A);this.a.removeEventListener("mousemove",this.w);for(var a=b.ownerDocument.getElementsByTagName("a"),c=0;c<a.length;c++)a[c].removeEventListener("click",this.D)}this.selection.reset(this.a);this.a=b;this.p(this.i);this.a.addEventListener("mouseup",this.A,!0);this.a.addEventListener("mousedown",this.v);this.a.addEventListener("mousemove",this.w);b=b.ownerDocument.getElementsByTagName("a");
for(a=0;a<b.length;a++)b[a].addEventListener("click",this.D);this.q(this.r)};t.prototype.setContainer=t.prototype.F;t.prototype.p=function(b){this.i=b};t.prototype.setSelectionMode=t.prototype.p;t.prototype.j=function(b){for(var a=b;a&&this.h&&!this.h(a);)a=a.parentNode;return a||b};t.prototype.getBestElement=t.prototype.j;t.prototype.B=function(b){return this.i&&this.a?(s(this.selection,this.a,this.j(b.target),b.shiftKey)&&this.c&&this.c(),b.preventDefault(),!1):!0};
t.prototype.P=function(b){return this.i&&this.a?(this.j(b.target),this.selection.k=!0,b.preventDefault(),!1):!0};t.prototype.Q=function(b){if(this.i&&this.a){var a=this.selection,c=this.a,d=this.j(b.target);if(a.k)a.l||(a.l=!0);else{for(var a=c.querySelectorAll(".rsz-select-candidate"),g=0;g<a.length;g++)a[g].classList.remove("rsz-select-candidate");c.classList.remove("rsz-select-candidate");d.classList.add("rsz-select-candidate")}b.preventDefault();return!1}return!0};t.prototype.e=function(){return this.selection.e(this.a)};
t.prototype.getSelected=t.prototype.e;function u(b){var a=this;this.toolbar=new n(b.querySelector("#toolbar"));this.I=new l(b.querySelector("#stage"));this.g=new t;this.K=new k;this.toolbar.n=function(b,d){return a.I.G(b,d)};this.toolbar.m=function(){return a.K.open().then(function(b){return v(a,b)})};this.g.h=function(b){return a.u(b)};this.g.c=function(){return a.toolbar.o(a.g.e())};this.g.p(!0);this.g.q(window.location.href+"iframe.css");this.toolbar.f(4)}
u.prototype.u=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};f("App.prototype.hasSiblings",u.prototype.u);function v(b,a){b.I.H(a.url).then(function(a){b.g.F(a.body);b.toolbar.o([])})};window.initResponsizeApp=function(){for(var b=new u(document.getElementById("rsz-app")),a=document.location.search,a=a.split("+").join(" "),c={},d,g=/[?&]?([^=]+)=([^&]*)/g;d=g.exec(a);)c[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);c.url&&v(b,{url:c.url})};
/*
//@ sourceMappingURL=responsize.js.map
*/