var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var l;c.length&&(l=c.shift());)c.length||void 0===b?d=d[l]?d[l]:d[l]={}:d[l]=b};function h(){this.A=window.ce.api.CloudExplorer.get("ce-js");this.l=null}f("FileService",h);h.prototype.open=function(){var a=this;return new Promise(function(b,c){a.A.pick(function(c){console.log("my Blob: "+JSON.stringify(c));a.l=c;b(c.url)},function(a){console.log("error "+JSON.stringify(a));c(a)})})};h.prototype.open=h.prototype.open;
h.prototype.save=function(a){var b=this;return new Promise(function(c,d){console.log("fileService save",a,b.l);b.A.write(b.l,a,function(a){console.log("my Blob: "+JSON.stringify(a));b.l=a;c(a.url)},function(a){console.log("error "+JSON.stringify(a));d(a)})})};h.prototype.save=h.prototype.save;function k(a){this.element=a;this.a=a.getElementsByTagName("iframe")[0];this.height=this.width=1;this.w=!0;window.addEventListener("resize",this.c.bind(this))}f("Stage",k);k.prototype.M=function(a,b){this.w=!1;this.width=a;this.height=b;this.c()};k.prototype.setSize=k.prototype.M;
k.prototype.D=function(){for(var a=null,b=null,c=null,d=null,l=this.a.contentDocument.querySelectorAll("*"),s=0;s<l.length;s++){var g=l[s];if(null===a||g.offsetLeft<a)a=g.offsetLeft;if(null===c||g.offsetTop<c)c=g.offsetTop;g.offsetLeft+g.offsetWidth>b&&(b=g.offsetLeft+g.offsetWidth);g.offsetTop+g.offsetHeight>d&&(d=g.offsetTop+g.offsetHeight)}return{aa:b-a,S:d-c}};k.prototype.getContentSize=k.prototype.D;
k.prototype.c=function(){if(this.w){var a=this.D();this.width=a.aa;this.height=a.S}this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var a=this.element.offsetWidth,b=this.element.offsetHeight,c=Math.min(1,a/this.width,b/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";b=(b-this.height*c)/2;this.a.style.left=(a-this.width*c)/2+"px";this.a.style.top=b+"px"};k.prototype.redraw=k.prototype.c;
k.prototype.e=function(a){a?this.a.parentNode.classList.add("rsz-loading"):this.a.parentNode.classList.remove("rsz-loading")};k.prototype.setLoading=k.prototype.e;k.prototype.N=function(a){var b=this;return new Promise(function(c,d){b.e(!0);b.a.onload=function(){b.e(!1);b.c();c(b.a.contentDocument)};b.a.onerror=function(a){b.e(!1);d(a)};b.a.src=a})};k.prototype.setUrl=k.prototype.N;k.prototype.P=function(){return this.a.contentDocument.documentElement.outerHTML};k.prototype.getHtml=k.prototype.P;
k.prototype.Y=function(a){var b=this;return new Promise(function(c,d){b.e(!0);b.a.onload=function(){b.e(!1);""!==a&&(b.a.src="",b.a.contentDocument.write(a));b.c();c(b.a.contentDocument)};b.a.onerror=function(a){b.e(!1);d(a)};b.a.src="about:blank"})};k.prototype.setHtml=k.prototype.Y;f("Device",{ca:0,da:1,ea:2,fa:3,ba:4});var m=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];f("DeviceData",m);
function n(a){var b=this;this.element=a;this.element.querySelector(".open");this.K=this.element.querySelector(".save");this.selection=[];this.q=this.j=this.g=null;this.element.addEventListener("click",function(a){var d=a.target;d.classList.contains("open")&&b.g&&b.g();d.classList.contains("save")?b.j&&b.j():d.classList.contains("mobile")?b.i(0):d.classList.contains("mobile-h")?b.i(1):d.classList.contains("tablet")?b.i(2):d.classList.contains("desktop")&&b.i(4);a.preventDefault();return!1})}
f("Toolbar",n);function p(a,b){b?a.K.classList.remove("off"):a.K.classList.add("off")}n.prototype.i=function(a){for(var b=this.element.querySelectorAll(".selected"),c=0;c<b.length;c++)b.item(c).classList.remove("selected");this.element.querySelector("."+m[a].name).classList.add("selected");this.q&&this.q(m[a].width,m[a].height)};n.prototype.setDevice=n.prototype.i;n.prototype.r=function(a){this.selection=a;this.c()};n.prototype.setSelection=n.prototype.r;n.prototype.c=function(){};
n.prototype.redraw=n.prototype.c;function q(){this.t=[];this.T=0}f("RszDom",q);function r(a,b){a.t.forEach(function(a){a=b.querySelector("#"+a.id);a.parentNode.removeChild(a)});for(var c=b.querySelectorAll(".rsz-select-candidate, .rsz-selected"),d=0;d<c.length;d++)c[d].classList.remove("rsz-selected"),c[d].classList.remove("rsz-select-candidate")}function t(a,b){a.t.forEach(function(a){return b.querySelector("head").appendChild(a.cloneNode(!0))})}q.prototype.u=function(a,b){b.id="rsz-"+this.T++;this.t.push(b);a&&a.head.appendChild(b.cloneNode(!0))};
q.prototype.addTempElement=q.prototype.u;function u(){this.b=null;this.p=this.o=!1}f("RszSelection",u);u.prototype.reset=function(a){this.o=!1;this.d(a).forEach(function(a){v(a)})};function w(a,b,c,d){a.o=!1;if(a.p)a.p=!1;else return d||a.d(b).forEach(function(a){a!=c&&v(a)}),a.select(c),!0;return!1}u.prototype.d=function(a){if(a){a=a.querySelectorAll(".rsz-selected");for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}return[]};u.prototype.getSelected=u.prototype.d;
u.prototype.select=function(a,b){a.classList.contains("rsz-selected")||(a.classList.add("rsz-selected"),!1!==b&&this.b&&this.b())};function v(a){a.classList.contains("rsz-selected")&&a.classList.remove("rsz-selected")};function x(){this.b=null;this.h=!1;this.k=this.document=null;this.G=this.U.bind(this);this.I=this.W.bind(this);this.H=this.V.bind(this);this.J=this.X.bind(this);this.selection=new u;this.m=new q}f("Wysiwyg",x);x.prototype.Z=function(a){return this.selection.b=a};x.prototype.setOnSelect=x.prototype.Z;x.prototype.Q=function(){return this.selection.b};x.prototype.getOnSelect=x.prototype.Q;x.prototype.$=function(a){return this.k=a};x.prototype.setSelectFilter=x.prototype.$;x.prototype.R=function(){return this.k};
x.prototype.getSelectFilter=x.prototype.R;x.prototype.C=function(){var a=this.document.documentElement.cloneNode(!0);r(this.m,a);return a.outerHTML};x.prototype.getCleanHtml=x.prototype.C;
x.prototype.L=function(a){this.document&&(this.document.removeEventListener("mousedown",this.G),this.document.removeEventListener("mouseup",this.I),this.document.removeEventListener("mousemove",this.H),this.document.removeEventListener("click",this.J,!0),r(this.m,this.document.documentElement));this.selection.reset(this.document);this.document=a;this.s(this.h);this.document.addEventListener("mouseup",this.I,!0);this.document.addEventListener("mousedown",this.G);this.document.addEventListener("mousemove",
this.H);this.document.addEventListener("click",this.J,!0);t(this.m,this.document.documentElement)};x.prototype.setDocument=x.prototype.L;x.prototype.s=function(a){this.h=a};x.prototype.setSelectionMode=x.prototype.s;x.prototype.n=function(a){for(var b=a;b&&this.k&&!this.k(b);)b=b.parentNode;return b||a};x.prototype.getBestElement=x.prototype.n;
x.prototype.v=function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",a);this.m.u(this.document,b)};x.prototype.addTempStyle=x.prototype.v;x.prototype.X=function(a){this.h&&(a.stopPropagation(),a.preventDefault())};x.prototype.W=function(a){this.h&&this.document&&(w(this.selection,this.document,this.n(a.target),a.shiftKey)&&this.b&&this.b(),a.preventDefault())};
x.prototype.U=function(a){this.h&&this.document&&(this.n(a.target),this.selection.o=!0,a.preventDefault())};x.prototype.V=function(a){if(this.h&&this.document){var b=this.selection,c=this.document,d=this.n(a.target);if(b.o)b.p||(b.p=!0);else{b=c.querySelectorAll(".rsz-select-candidate");for(c=0;c<b.length;c++)b[c].classList.remove("rsz-select-candidate");d.classList.add("rsz-select-candidate")}a.preventDefault()}};x.prototype.d=function(){return this.selection.d(this.document)};
x.prototype.getSelected=x.prototype.d;function y(a){var b=this;this.toolbar=new n(a.querySelector("#toolbar"));this.O=new k(a.querySelector("#stage"));this.f=new x;this.B=new h;this.toolbar.q=function(a,d){return b.O.M(a,d)};this.toolbar.g=function(){return b.B.open().then(function(a){return b.g(a)})};this.toolbar.j=function(){return b.B.save(b.f.C()).then(function(){return b.j()})};this.f.k=function(a){return b.F(a)};this.f.b=function(){b.toolbar.r(b.f.d());p(b.toolbar,!0)};this.f.s(!0);this.toolbar.i(4);this.f.v(window.location.href+
"iframe.css")}y.prototype.F=function(a){if(a&&a.parentNode&&a.parentNode.childNodes){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b}return!1};f("App.prototype.hasSiblings",y.prototype.F);y.prototype.g=function(a){var b=this;this.O.N(a).then(function(a){b.f.L(a);b.toolbar.r([])})};y.prototype.j=function(){p(this.toolbar,!1)};window.initResponsizeApp=function(){var a=new y(document.getElementById("rsz-app")),b=z();b.url&&setTimeout(function(){return a.g(b.url)},1E3)};function z(){for(var a=document.location.search,a=a.split("+").join(" "),b={},c,d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);return b};
/*
//@ sourceMappingURL=responsize.js.map
*/