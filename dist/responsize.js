var f=this;function h(b,a){var c=b.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===a?d=d[g]?d[g]:d[g]={}:d[g]=a};function k(){}
k.prototype.h=function(b){if(null===b.querySelector("head style#responsize-style")){var a=b.createElement("style");a.innerHTML="          .rsz-responsized, .rsz-responsized * {            position: relative !important;            max-width: 100% !important;            top: auto !important;            left: auto !important;            width: auto !important;            height: auto !important;            top: initial !important;            left: initial !important;            width: initial !important;            height: initial !important;            margin: 0 !important;            padding: 0 !important;          }        ";a.id=
"responsize-style";b.head.appendChild(a);a=b.createElement("link");a.rel="stylesheet";a.href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css";b.head.appendChild(a);a=b.createElement("script");a.src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js";b.head.appendChild(a)}};k.prototype.g=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};
function m(b,a){console.log("responsize",a);a.forEach(function(a){a.classList.toggle("rsz-responsized")});var c=Math.round(window.innerWidth/12);a.forEach(function(a){a=a.querySelectorAll("*");for(var g=0;g<a.length;g++){var e=a[g];console.log("aaa",e);if(b.g(e)){var l=Math.max(1,Math.round(e.offsetWidth/c));e.classList.add("col-sm-"+l);e.classList.add("col-md-"+Math.max(1,Math.round(l/2)));e.classList.add("col-xs-"+Math.min(12,2*l))}console.log("bbb",e)}})};function n(b){this.element=b;this.a=document.getElementById("iframe");this.height=this.width=1;window.addEventListener("resize",this.c.bind(this))}h("Stage",n);n.prototype.w=function(b,a){this.width=b;this.height=a;this.c()};n.prototype.setSize=n.prototype.w;
n.prototype.c=function(){this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var b=this.element.offsetWidth,a=this.element.offsetHeight,c=Math.min(1,b/this.width,a/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";a=(a-this.height*c)/2;this.a.style.left=(b-this.width*c)/2+"px";this.a.style.top=a+"px"};n.prototype.redraw=n.prototype.c;
n.prototype.B=function(b){var a=this;return new Promise(function(c){a.a.onload=function(){return c(a.a.contentDocument)};a.a.src=b})};n.prototype.setUrl=n.prototype.B;h("Device",{F:0,G:1,H:2,I:3,D:4});var p=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];h("DeviceData",p);
function q(b){var a=this;this.element=b;this.t=this.element.querySelector(".move-element");this.k=this.element.querySelector(".responsizer");this.s=this.element.querySelector(".select");this.selection=[];this.p=this.r=this.n=this.o=this.q=null;this.element.addEventListener("click",function(b){var d=b.target;d.classList.contains("select")?(a.s.classList.toggle("off"),a.q&&a.q(!a.s.classList.contains("off"))):d.classList.contains("mobile")?a.d(0):d.classList.contains("mobile-h")?a.d(1):d.classList.contains("tablet")?
a.d(2):d.classList.contains("desktop")?a.d(4):d.classList.contains("responsizer")&&(a.p&&a.p(),a.c());b.preventDefault();return!1});this.element.querySelector(".move-element .up").addEventListener("click",function(){a.o&&a.o()});this.element.querySelector(".move-element .down").addEventListener("click",function(){a.n&&a.n()})}h("Toolbar",q);q.prototype.h=function(){this.s.classList.add("off")};q.prototype.init=q.prototype.h;
q.prototype.d=function(b){for(var a=this.element.querySelectorAll(".selected"),c=0;c<a.length;c++)a.item(c).classList.remove("selected");this.element.querySelector("."+p[b].name).classList.add("selected");this.r&&this.r(p[b].width,p[b].height)};q.prototype.setDevice=q.prototype.d;q.prototype.u=function(b){this.selection=b;this.c()};q.prototype.setSelection=q.prototype.u;
q.prototype.c=function(){if(this.selection&&0<this.selection.length){this.t.classList.remove("disabled");this.k.classList.remove("disabled");var b=!1;this.selection.forEach(function(a){a.classList.contains("rsz-responsized")&&(b=!0)});console.log("xxx",this.selection);b?this.k.classList.remove("off"):this.k.classList.add("off")}else this.t.classList.add("disabled"),this.k.classList.add("disabled")};q.prototype.redraw=q.prototype.c;function r(b){this.element=b;this.a=document.getElementById("iframe");this.j=this.i=this.l=!1;this.b=this.f=null}h("Wysiwyg",r);
r.prototype.h=function(b){var a=this;this.l=!1;this.f=b;b.addEventListener("mouseup",function(b){s(a,a.m(b.target));b.preventDefault();return!1});b.addEventListener("mousedown",function(b){a.i=!0;b.preventDefault();return!1});b.addEventListener("mousemove",function(b){var c=a.m(b.target);if(a.l)if(a.i)a.j||(a.j=!0);else{for(var e=a.f.querySelectorAll(".rsz-select-candidate"),l=0;l<e.length;l++)e[l].classList.remove("rsz-select-candidate");c.classList.add("rsz-select-candidate")}b.preventDefault();
return!1});this.i=!1;var c=b.createElement("style");c.innerHTML="      .rsz-select-mode * {        min-width: 20px !important;        min-height: 20px !important;        opacity: 1 !important;      }      .rsz-dragging {      }      .rsz-selected {        border: 1px solid red !important;      }      .rsz-select-candidate {        border: 1px solid orange !important;      }    ";b.head.appendChild(c)};r.prototype.init=r.prototype.h;
r.prototype.v=function(b){(this.l=b)?this.f.body.classList.add("rsz-select-mode"):this.f.body.classList.remove("rsz-select-mode")};r.prototype.setSelectionMode=r.prototype.v;r.prototype.m=function(b){for(var a=b;a&&!this.g(a);)a=a.parentNode;return a||b};r.prototype.getBestElement=r.prototype.m;r.prototype.g=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};r.prototype.hasSiblings=r.prototype.g;
function t(b,a){for(var c=null,d=b.parentNode.childNodes.length,g=0;g<d;g++){var e=b.parentNode.childNodes[g];!1===a&&(e=b.parentNode.childNodes[d-1-g]);if(1===e.nodeType){if(e===b)return c;c=e}}return null}function s(b,a){b.i=!1;b.l&&(b.j?b.j=!1:(u(b).forEach(function(c){c!=a&&(c.classList.remove("rsz-selected"),b.b&&b.b())}),v(b,a)))}function u(b){var a=[];b=b.f.querySelectorAll(".rsz-selected");for(var c=0;c<b.length;c++)a.push(b[c]);return a}
r.prototype.select=function(b){b.classList.add("rsz-selected");this.b&&this.b()};function v(b,a){a.classList.toggle("rsz-selected");b.b&&b.b()}function w(b){u(b).forEach(function(a){var b=t(a,!0);b&&a.parentNode.insertBefore(a,b)})}function x(b){u(b).forEach(function(a){var b=t(a,!1);b&&a.parentNode.insertBefore(b,a)})};function y(){var b=document.getElementById("rsz-app"),a=this;this.toolbar=new q(b.querySelector("#toolbar"));this.C=new n(b.querySelector("#stage"));this.e=new r(b.querySelector("#stage"));this.A=new k;this.toolbar.r=function(b,d){return a.C.w(b,d)};this.toolbar.q=function(b){return a.e.v(b)};this.toolbar.n=function(){return x(a.e)};this.toolbar.o=function(){return w(a.e)};this.toolbar.p=function(){return m(a.A,u(a.e))};this.e.b=function(){return a.toolbar.u(u(a.e))};this.toolbar.d(4)};window.initResponsizeApp=function(){new y};
