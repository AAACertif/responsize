var d=this;function f(a,b){var c=a.split("."),e=d;c[0]in e||!e.execScript||e.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===b?e=e[g]?e[g]:e[g]={}:e[g]=b};function h(a,b){this.element=a;this.b=b;this.height=this.width=1;window.addEventListener("resize",this.c.bind(this))}f("Stage",h);h.prototype.C=function(a,b){this.width=a;this.height=b;this.c()};h.prototype.setSize=h.prototype.C;
h.prototype.c=function(){this.b.style.width=this.width+"px";this.b.style.height=this.height+"px";var a=this.element.offsetWidth,b=this.element.offsetHeight,c=Math.min(1,a/this.width,b/this.height);this.b.style.transform="scale("+c+")";this.b.style.transformOrigin="0 0";b=(b-this.height*c)/2;this.b.style.left=(a-this.width*c)/2+"px";this.b.style.top=b+"px"};h.prototype.redraw=h.prototype.c;
h.prototype.D=function(a){var b=this;return new Promise(function(c){b.b.onload=function(){return c(b.b.contentDocument)};b.b.src=a})};h.prototype.setUrl=h.prototype.D;f("Device",{L:0,M:1,O:2,P:3,K:4});var l=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];f("DeviceData",l);
function m(a,b){var c=this;this.element=a;this.p=b.querySelector("#devicesElement");this.l=b.querySelector("#moveButtonsElement");this.m=b.querySelector("#responsizerElement");this.J=b.querySelector("#widthElement");this.selection=[];this.t=this.u=this.r=this.s=this.I=null;this.p.addEventListener("click",function(a){console.log("click",a);var b=a.target;b.classList.contains("mobile")?c.e(0):b.classList.contains("mobile-h")?c.e(1):b.classList.contains("tablet")?c.e(2):b.classList.contains("tablet-h")?
c.e(3):b.classList.contains("desktop")?c.e(4):b.classList.contains("responsizer")&&(c.t&&c.t(),c.c());a.preventDefault();return!1});this.l.querySelector(".move-element .up").addEventListener("click",function(){c.s&&c.s()});this.l.querySelector(".move-element .down").addEventListener("click",function(){c.r&&c.r()})}f("Toolbar",m);m.prototype.f=function(){console.log("init");this.J.classList.add("off")};m.prototype.init=m.prototype.f;
m.prototype.e=function(a){for(var b=this.p.querySelectorAll(".selected"),c=0;c<b.length;c++)b.item(c).classList.remove("selected");this.p.querySelector("."+l[a].name).classList.add("selected");this.u&&this.u(l[a].width,l[a].height);this.c()};m.prototype.setDevice=m.prototype.e;m.prototype.A=function(a){this.selection=a;this.c()};m.prototype.setSelection=m.prototype.A;
m.prototype.c=function(){if(this.selection&&0<this.selection.length){this.l.classList.remove("disabled");this.m.classList.remove("disabled");var a=!1;this.selection.forEach(function(b){b.classList.contains("rsz-responsized")&&(a=!0)});console.log("xxx",this.selection);a?this.m.classList.remove("off"):this.m.classList.add("off")}else this.l.classList.add("disabled"),this.m.classList.add("disabled")};m.prototype.redraw=m.prototype.c;function n(a){this.element=a;this.b=document.getElementById("iframe");this.k=this.j=this.n=!1;this.d=this.g=null}f("Wysiwyg",n);
n.prototype.f=function(a){var b=this;this.n=!1;this.g=a;a.addEventListener("mouseup",function(a){p(b,b.q(a.target));a.preventDefault();return!1});a.addEventListener("mousedown",function(a){b.j=!0;a.preventDefault();return!1});a.addEventListener("mousemove",function(a){var c=b.q(a.target);if(b.n)if(b.j)b.k||(b.k=!0);else{for(var k=b.g.querySelectorAll(".rsz-select-candidate"),q=0;q<k.length;q++)k[q].classList.remove("rsz-select-candidate");c.classList.add("rsz-select-candidate")}a.preventDefault();
return!1});this.j=!1;var c=a.createElement("style");c.innerHTML="      .rsz-select-mode * {        min-width: 20px !important;        min-height: 20px !important;        opacity: 1 !important;      }      .rsz-dragging {      }      .rsz-selected {        border: 1px solid red !important;      }      .rsz-select-candidate {        border: 1px solid orange !important;      }    ";a.head.appendChild(c)};n.prototype.init=n.prototype.f;
n.prototype.B=function(a){(this.n=a)?this.g.body.classList.add("rsz-select-mode"):this.g.body.classList.remove("rsz-select-mode")};n.prototype.setSelectionMode=n.prototype.B;n.prototype.q=function(a){for(var b=a;b&&!this.v(b);)b=b.parentNode;return b||a};n.prototype.getBestElement=n.prototype.q;n.prototype.v=function(a){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b};n.prototype.hasSiblings=n.prototype.v;
function r(a,b){for(var c=null,e=a.parentNode.childNodes.length,g=0;g<e;g++){var k=a.parentNode.childNodes[g];!1===b&&(k=a.parentNode.childNodes[e-1-g]);if(1===k.nodeType){if(k===a)return c;c=k}}return null}function p(a,b){a.j=!1;a.n&&(a.k?a.k=!1:(s(a).forEach(function(c){c!=b&&(c.classList.remove("rsz-selected"),a.d&&a.d())}),t(a,b)))}function s(a){var b=[];a=a.g.querySelectorAll(".rsz-selected");for(var c=0;c<a.length;c++)b.push(a[c]);return b}
n.prototype.select=function(a){a.classList.add("rsz-selected");this.d&&this.d()};function t(a,b){b.classList.toggle("rsz-selected");a.d&&a.d()}function u(a){s(a).forEach(function(a){var c=r(a,!0);c&&a.parentNode.insertBefore(a,c)})}function v(a){s(a).forEach(function(a){var c=r(a,!1);c&&a.parentNode.insertBefore(c,a)})};function w(a){var b=this;this.element=a;window.addEventListener("polymer-ready",function(){console.log("start");x(b)})}f("App",w);
function x(a){a.F=a.element.getElementsByTagName("rsz-toolbar")[0];a.o=a.element.getElementsByTagName("rsz-stage")[0];a.G=a.element.getElementsByTagName("rsz-wysiwyg")[0];a.w=a.element.getElementsByTagName("rsz-responsizer")[0];a.toolbar=null;a.F&&(a.toolbar=a.F.controller);a.i=null;a.o&&(a.i=a.o.controller,console.log("aaabbb",a.i));a.a=null;a.G&&(a.a=a.G.controller);a.h=null;a.w&&(a.h=a.w.controller);if(a.toolbar&&a.i){var b=a;a.toolbar.u=function(a,e){return b.i.C(a,e)}}a.toolbar&&a.a&&(b=a,a.toolbar.I=
function(a){return b.a.B(a)},a.toolbar.r=function(){return v(b.a)},a.toolbar.s=function(){return u(b.a)},a.a.d=function(){return b.toolbar.A(s(b.a))});a.toolbar&&a.a&&a.h&&(b=a,a.toolbar.t=function(){return b.h.N(s(b.a))});console.log("app ",a.toolbar,a.i,a.o);console.dir(a.o);a.toolbar&&a.toolbar.e(4)}w.prototype.H=function(a){var b=this.element.getElementsByTagName("rsz-stage")[0];if(b){var c=this;b.D(a).then(function(a){c.a&&c.a.f(a);c.h&&c.h.f(a);c.toolbar&&c.toolbar.f(a)})}};
w.prototype.importWebsite=w.prototype.H;
