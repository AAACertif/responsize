function f(){}
f.prototype.f=function(b){if(null===b.querySelector("head style#responsize-style")){var a=b.createElement("style");a.innerHTML="          .rsz-responsized, .rsz-responsized * {            position: relative !important;            max-width: 100% !important;            top: auto !important;            left: auto !important;            width: auto !important;            height: auto !important;            top: initial !important;            left: initial !important;            width: initial !important;            height: initial !important;            margin: 0 !important;            padding: 0 !important;          }        ";a.id=
"responsize-style";b.head.appendChild(a);a=b.createElement("link");a.rel="stylesheet";a.href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css";b.head.appendChild(a);a=b.createElement("script");a.src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js";b.head.appendChild(a)}};f.prototype.k=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};
function h(b,a){console.log("responsize",a);a.forEach(function(a){a.classList.toggle("rsz-responsized")});var c=Math.round(window.innerWidth/12);a.forEach(function(a){a=a.querySelectorAll("*");for(var g=0;g<a.length;g++){var e=a[g];console.log("aaa",e);if(b.k(e)){var k=Math.max(1,Math.round(e.offsetWidth/c));e.classList.add("col-sm-"+k);e.classList.add("col-md-"+Math.max(1,Math.round(k/2)));e.classList.add("col-xs-"+Math.min(12,2*k))}console.log("bbb",e)}})};function l(b){this.element=b;this.a=document.getElementById("iframe");this.height=this.width=1;window.addEventListener("resize",this.d.bind(this))}var m=["Stage"],n=this;m[0]in n||!n.execScript||n.execScript("var "+m[0]);for(var p;m.length&&(p=m.shift());){var q;if(q=!m.length)q=void 0!==l;q?n[p]=l:n=n[p]?n[p]:n[p]={}}l.prototype.t=function(b,a){this.width=b;this.height=a;this.d()};l.prototype.setSize=l.prototype.t;
l.prototype.d=function(){this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var b=this.element.offsetWidth,a=this.element.offsetHeight,c=Math.min(1,b/this.width,a/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";a=(a-this.height*c)/2;this.a.style.left=(b-this.width*c)/2+"px";this.a.style.top=a+"px"};l.prototype.redraw=l.prototype.d;
l.prototype.u=function(b){var a=this;return new Promise(function(c){a.a.onload=function(){return c(a.a.contentDocument)};a.a.src=b})};l.prototype.setUrl=l.prototype.u;var r=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];
function s(b){var a=this;this.element=b;this.r=this.element.querySelector(".move-element");this.i=this.element.querySelector(".responsizer");this.q=this.element.querySelector(".select");this.selection=[];this.n=this.p=this.l=this.m=this.o=null;this.element.addEventListener("click",function(b){var d=b.target;d.classList.contains("select")?(a.q.classList.toggle("off"),a.o&&a.o(!a.q.classList.contains("off"))):d.classList.contains("mobile")?t(a,0):d.classList.contains("mobile-h")?t(a,1):d.classList.contains("tablet")?
t(a,2):d.classList.contains("desktop")?t(a,4):d.classList.contains("responsizer")&&(a.n&&a.n(),a.d());b.preventDefault();return!1});this.element.querySelector(".move-element .up").addEventListener("click",function(){a.m&&a.m()});this.element.querySelector(".move-element .down").addEventListener("click",function(){a.l&&a.l()})}s.prototype.f=function(){this.q.classList.add("off")};
function t(b,a){for(var c=b.element.querySelectorAll(".selected"),d=0;d<c.length;d++)c.item(d).classList.remove("selected");b.element.querySelector("."+r[a].name).classList.add("selected");b.p&&b.p(r[a].width,r[a].height)}
s.prototype.d=function(){console.log("xxx",this.selection);if(this.selection&&0<this.selection.length){this.r.classList.remove("disabled");this.i.classList.remove("disabled");var b=!1;this.selection.forEach(function(a){a.classList.contains("rsz-responsized")&&(b=!0)});console.log("xxx",this.selection);b?this.i.classList.remove("off"):this.i.classList.add("off")}else this.r.classList.add("disabled"),this.i.classList.add("disabled")};function u(b){this.element=b;this.a=document.getElementById("iframe");this.h=this.g=this.j=!1;this.b=this.e=null}
u.prototype.f=function(b){var a=this;this.j=!1;this.e=b;b.addEventListener("mouseup",function(b){v(a,w(a,b.target));b.preventDefault();return!1});b.addEventListener("mousedown",function(b){a.g=!0;b.preventDefault();return!1});b.addEventListener("mousemove",function(b){var c=w(a,b.target);if(a.j)if(a.g)a.h||(a.h=!0);else{for(var e=a.e.querySelectorAll(".rsz-select-candidate"),k=0;k<e.length;k++)e[k].classList.remove("rsz-select-candidate");c.classList.add("rsz-select-candidate")}b.preventDefault();
return!1});this.g=!1;var c=b.createElement("style");c.innerHTML="      .rsz-select-mode * {        min-width: 20px !important;        min-height: 20px !important;        opacity: 1 !important;      }      .rsz-dragging {      }      .rsz-selected {        border: 1px solid red !important;      }      .rsz-select-candidate {        border: 1px solid orange !important;      }    ";b.head.appendChild(c)};function w(b,a){for(var c=a;c&&!b.k(c);)c=c.parentNode;return c||a}
u.prototype.k=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};function x(b,a){for(var c=null,d=b.parentNode.childNodes.length,g=0;g<d;g++){var e=b.parentNode.childNodes[g];!1===a&&(e=b.parentNode.childNodes[d-1-g]);if(1===e.nodeType){if(e===b)return c;c=e}}return null}function v(b,a){b.g=!1;b.j&&(b.h?b.h=!1:(y(b).forEach(function(c){c!=a&&(c.classList.remove("rsz-selected"),b.b&&b.b())}),z(b,a)))}
function y(b){var a=[];b=b.e.querySelectorAll(".rsz-selected");for(var c=0;c<b.length;c++)a.push(b[c]);return a}u.prototype.select=function(b){b.classList.add("rsz-selected");this.b&&this.b()};function z(b,a){a.classList.toggle("rsz-selected");b.b&&b.b()}function A(b){y(b).forEach(function(a){var b=x(a,!0);b&&a.parentNode.insertBefore(a,b)})}function B(b){y(b).forEach(function(a){var b=x(a,!1);b&&a.parentNode.insertBefore(b,a)})};function C(){var b=document.getElementById("app"),a=this;this.toolbar=new s(b.querySelector("#toolbar"));this.v=new l(b.querySelector("#stage"));this.c=new u(b.querySelector("#stage"));this.s=new f;this.toolbar.p=function(b,d){return a.v.t(b,d)};this.toolbar.o=function(b){var d=a.c;(d.j=b)?d.e.body.classList.add("rsz-select-mode"):d.e.body.classList.remove("rsz-select-mode")};this.toolbar.l=function(){return B(a.c)};this.toolbar.m=function(){return A(a.c)};this.toolbar.n=function(){return h(a.s,y(a.c))};
this.c.b=function(){var b=a.toolbar,d=y(a.c);b.selection=d;b.d()};t(this.toolbar,4)}function D(b,a){b.v.u(a).then(function(a){b.c.f(a);b.s.f(a);b.toolbar.f(a)})};window.initResponsizeApp=function(){for(var b=new C,a=document.location.search,a=a.split("+").join(" "),c={},d,g=/[?&]?([^=]+)=([^&]*)/g;d=g.exec(a);)c[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);D(b,c.url||"test/silex/")};
