var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var h;c.length&&(h=c.shift());)c.length||void 0===b?d=d[h]?d[h]:d[h]={}:d[h]=b};function g(){this.C=window.ce.api.CloudExplorer.get("ce-js")}g.prototype.open=function(){var a=this;return new Promise(function(b,c){a.C.pick(function(a){console.log("my Blob: "+JSON.stringify(a));b(a)},function(b){console.log("error "+JSON.stringify(b));c(b)})})};function l(){}
l.prototype.b=function(a){if(null===a.querySelector("head style#responsize-style")){var b=a.createElement("style");b.innerHTML="          .rsz-responsized, .rsz-responsized * {            position: relative !important;            max-width: 100% !important;            top: auto !important;            left: auto !important;            width: auto !important;            height: auto !important;            top: initial !important;            left: initial !important;            width: initial !important;            height: initial !important;            margin: 0 !important;            padding: 0 !important;          }        ";b.id=
"responsize-style";a.head.appendChild(b);b=a.createElement("link");b.rel="stylesheet";b.href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css";a.head.appendChild(b);b=a.createElement("script");b.src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js";a.head.appendChild(b)}};l.prototype.h=function(a){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b};function m(a){this.element=a;this.a=document.getElementById("iframe");this.height=this.width=1;window.addEventListener("resize",this.e.bind(this))}f("Stage",m);m.prototype.w=function(a,b){this.width=a;this.height=b;this.e()};m.prototype.setSize=m.prototype.w;
m.prototype.e=function(){this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var a=this.element.offsetWidth,b=this.element.offsetHeight,c=Math.min(1,a/this.width,b/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";b=(b-this.height*c)/2;this.a.style.left=(a-this.width*c)/2+"px";this.a.style.top=b+"px"};m.prototype.redraw=m.prototype.e;
m.prototype.A=function(a){var b=this;return new Promise(function(c){b.a.onload=function(){return c(b.a.contentDocument)};b.a.src=a})};m.prototype.setUrl=m.prototype.A;f("Device",{H:0,I:1,J:2,K:3,G:4});var n=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];f("DeviceData",n);
function p(a){var b=this;this.element=a;this.q=this.element.querySelector(".move-element");this.element.querySelector(".open");this.t=this.element.querySelector(".save");this.selection=[];this.p=this.m=this.n=this.s=this.o=null;this.element.addEventListener("click",function(a){var d=a.target;d.classList.contains("open")&&b.o&&b.o();d.classList.contains("save")?(b.t.classList.toggle("off"),b.s&&b.s()):d.classList.contains("mobile")?b.f(0):d.classList.contains("mobile-h")?b.f(1):d.classList.contains("tablet")?
b.f(2):d.classList.contains("desktop")&&b.f(4);a.preventDefault();return!1});this.element.querySelector(".move-element .up").addEventListener("click",function(){b.n&&b.n()});this.element.querySelector(".move-element .down").addEventListener("click",function(){b.m&&b.m()})}f("Toolbar",p);p.prototype.b=function(){this.t.classList.add("off")};p.prototype.init=p.prototype.b;
p.prototype.f=function(a){for(var b=this.element.querySelectorAll(".selected"),c=0;c<b.length;c++)b.item(c).classList.remove("selected");this.element.querySelector("."+n[a].name).classList.add("selected");this.p&&this.p(n[a].width,n[a].height)};p.prototype.setDevice=p.prototype.f;p.prototype.u=function(a){this.selection=a;this.e()};p.prototype.setSelection=p.prototype.u;p.prototype.e=function(){this.selection&&0<this.selection.length?this.q.classList.remove("disabled"):this.q.classList.add("disabled")};
p.prototype.redraw=p.prototype.e;function r(a){this.element=a;this.a=document.getElementById("iframe");this.k=this.j=this.l=!1;this.r=this.c=this.g=null}f("Wysiwyg",r);
r.prototype.b=function(a){var b=this;this.l=!1;this.g=a;a.addEventListener("mouseup",function(a){s(b,b.i(a.target));a.preventDefault();return!1});a.addEventListener("mousedown",function(a){b.i(a.target);b.j=!0;a.preventDefault();return!1});a.addEventListener("mousemove",function(a){var c=b.i(a.target);if(b.l)if(b.j)b.k||(b.k=!0);else{for(var k=b.g.querySelectorAll(".rsz-select-candidate"),q=0;q<k.length;q++)k[q].classList.remove("rsz-select-candidate");c.classList.add("rsz-select-candidate")}a.preventDefault();
return!1});this.j=!1;var c=a.createElement("style");c.innerHTML="      .rsz-select-mode * {        min-width: 20px !important;        min-height: 20px !important;        opacity: 1 !important;      }      .rsz-dragging {      }      .rsz-selected {        border: 1px solid red !important;      }      .rsz-select-candidate {        border: 1px solid orange !important;      }    ";a.head.appendChild(c)};r.prototype.init=r.prototype.b;
r.prototype.v=function(a){(this.l=a)?this.g.body.classList.add("rsz-select-mode"):this.g.body.classList.remove("rsz-select-mode")};r.prototype.setSelectionMode=r.prototype.v;r.prototype.i=function(a){for(var b=a;b&&!this.r(b);)b=b.parentNode;return b||a};r.prototype.getBestElement=r.prototype.i;r.prototype.h=function(a){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b};r.prototype.hasSiblings=r.prototype.h;
function t(a,b){for(var c=null,d=a.parentNode.childNodes.length,h=0;h<d;h++){var k=a.parentNode.childNodes[h];!1===b&&(k=a.parentNode.childNodes[d-1-h]);if(1===k.nodeType){if(k===a)return c;c=k}}return null}function s(a,b){a.j=!1;a.l&&(a.k?a.k=!1:(u(a).forEach(function(c){c!=b&&(c.classList.remove("rsz-selected"),a.c&&a.c())}),v(a,b)))}function u(a){var b=[];a=a.g.querySelectorAll(".rsz-selected");for(var c=0;c<a.length;c++)b.push(a[c]);return b}
r.prototype.select=function(a){a.classList.add("rsz-selected");this.c&&this.c()};function v(a,b){b.classList.toggle("rsz-selected");a.c&&a.c()}function w(a){u(a).forEach(function(a){var c=t(a,!0);c&&a.parentNode.insertBefore(a,c)})}function x(a){u(a).forEach(function(a){var c=t(a,!1);c&&a.parentNode.insertBefore(c,a)})};function y(a){var b=this;this.toolbar=new p(a.querySelector("#toolbar"));this.B=new m(a.querySelector("#stage"));this.d=new r(a.querySelector("#stage"));this.F=new l;this.D=new g;this.toolbar.p=function(a,d){return b.B.w(a,d)};this.toolbar.o=function(){return b.D.open().then(function(a){return z(b,a)})};this.toolbar.m=function(){return x(b.d)};this.toolbar.n=function(){return w(b.d)};this.d.r=function(a){return b.h(a)};this.d.c=function(){return b.toolbar.u(u(b.d))};this.toolbar.f(4)}
y.prototype.h=function(a){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b};f("App.prototype.hasSiblings",y.prototype.h);function z(a,b){a.B.A(b.url).then(function(b){a.d.b(b);a.d.v(!0);a.F.b(b);a.toolbar.b(b)})};window.initResponsizeApp=function(){new y(document.getElementById("rsz-app"))};
