var g=this;function h(b,a){var c=b.split("."),d=g;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===a?d=d[e]?d[e]:d[e]={}:d[e]=a};function k(){}
k.prototype.b=function(b){if(null===b.querySelector("head style#responsize-style")){var a=b.createElement("style");a.innerHTML="          .rsz-responsized, .rsz-responsized * {            position: relative !important;            max-width: 100% !important;            top: auto !important;            left: auto !important;            width: auto !important;            height: auto !important;            top: initial !important;            left: initial !important;            width: initial !important;            height: initial !important;            margin: 0 !important;            padding: 0 !important;          }        ";a.id=
"responsize-style";b.head.appendChild(a);a=b.createElement("link");a.rel="stylesheet";a.href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css";b.head.appendChild(a);a=b.createElement("script");a.src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js";b.head.appendChild(a)}};k.prototype.h=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};
function m(b,a){console.log("responsize",a);a.forEach(function(a){a.classList.toggle("rsz-responsized")});var c=Math.round(window.innerWidth/12);a.forEach(function(a){a=a.querySelectorAll("*");for(var e=0;e<a.length;e++){var f=a[e];console.log("aaa",f);if(b.h(f)){var l=Math.max(1,Math.round(f.offsetWidth/c));f.classList.add("col-sm-"+l);f.classList.add("col-md-"+Math.max(1,Math.round(l/2)));f.classList.add("col-xs-"+Math.min(12,2*l))}console.log("bbb",f)}})};function n(b){this.element=b;this.a=document.getElementById("iframe");this.height=this.width=1;window.addEventListener("resize",this.d.bind(this))}h("Stage",n);n.prototype.A=function(b,a){this.width=b;this.height=a;this.d()};n.prototype.setSize=n.prototype.A;
n.prototype.d=function(){this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var b=this.element.offsetWidth,a=this.element.offsetHeight,c=Math.min(1,b/this.width,a/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";a=(a-this.height*c)/2;this.a.style.left=(b-this.width*c)/2+"px";this.a.style.top=a+"px"};n.prototype.redraw=n.prototype.d;
n.prototype.B=function(b){var a=this;return new Promise(function(c){a.a.onload=function(){return c(a.a.contentDocument)};a.a.src=b})};n.prototype.setUrl=n.prototype.B;h("Device",{F:0,G:1,H:2,I:3,D:4});var p=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:768,height:1024},{name:"tablet-h",width:1024,height:768},{name:"desktop",width:1280,height:800}];h("DeviceData",p);
function q(b){var a=this;this.element=b;this.t=this.element.querySelector(".move-element");this.k=this.element.querySelector(".responsizer");this.s=this.element.querySelector(".select");this.selection=[];this.p=this.r=this.n=this.o=this.q=null;this.element.addEventListener("click",function(b){var d=b.target;d.classList.contains("select")?(a.s.classList.toggle("off"),a.q&&a.q(!a.s.classList.contains("off"))):d.classList.contains("mobile")?a.f(0):d.classList.contains("mobile-h")?a.f(1):d.classList.contains("tablet")?
a.f(2):d.classList.contains("desktop")?a.f(4):d.classList.contains("responsizer")&&(a.p&&a.p(),a.d());b.preventDefault();return!1});this.element.querySelector(".move-element .up").addEventListener("click",function(){a.o&&a.o()});this.element.querySelector(".move-element .down").addEventListener("click",function(){a.n&&a.n()})}h("Toolbar",q);q.prototype.b=function(){this.s.classList.add("off")};q.prototype.init=q.prototype.b;
q.prototype.f=function(b){for(var a=this.element.querySelectorAll(".selected"),c=0;c<a.length;c++)a.item(c).classList.remove("selected");this.element.querySelector("."+p[b].name).classList.add("selected");this.r&&this.r(p[b].width,p[b].height)};q.prototype.setDevice=q.prototype.f;q.prototype.v=function(b){this.selection=b;this.d()};q.prototype.setSelection=q.prototype.v;
q.prototype.d=function(){if(this.selection&&0<this.selection.length){this.t.classList.remove("disabled");this.k.classList.remove("disabled");var b=!1;this.selection.forEach(function(a){a.classList.contains("rsz-responsized")&&(b=!0)});console.log("xxx",this.selection);b?this.k.classList.remove("off"):this.k.classList.add("off")}else this.t.classList.add("disabled"),this.k.classList.add("disabled")};q.prototype.redraw=q.prototype.d;function r(b){this.element=b;this.a=document.getElementById("iframe");this.j=this.i=this.l=!1;this.c=this.g=null}h("Wysiwyg",r);
r.prototype.b=function(b){var a=this;this.l=!1;this.g=b;b.addEventListener("mouseup",function(b){s(a,a.m(b.target));b.preventDefault();return!1});b.addEventListener("mousedown",function(b){a.i=!0;b.preventDefault();return!1});b.addEventListener("mousemove",function(b){var c=a.m(b.target);if(a.l)if(a.i)a.j||(a.j=!0);else{for(var f=a.g.querySelectorAll(".rsz-select-candidate"),l=0;l<f.length;l++)f[l].classList.remove("rsz-select-candidate");c.classList.add("rsz-select-candidate")}b.preventDefault();
return!1});this.i=!1;var c=b.createElement("style");c.innerHTML="      .rsz-select-mode * {        min-width: 20px !important;        min-height: 20px !important;        opacity: 1 !important;      }      .rsz-dragging {      }      .rsz-selected {        border: 1px solid red !important;      }      .rsz-select-candidate {        border: 1px solid orange !important;      }    ";b.head.appendChild(c)};r.prototype.init=r.prototype.b;
r.prototype.w=function(b){(this.l=b)?this.g.body.classList.add("rsz-select-mode"):this.g.body.classList.remove("rsz-select-mode")};r.prototype.setSelectionMode=r.prototype.w;r.prototype.m=function(b){for(var a=b;a&&!this.h(a);)a=a.parentNode;return a||b};r.prototype.getBestElement=r.prototype.m;r.prototype.h=function(b){var a=0,c;for(c in b.parentNode.childNodes)1===b.parentNode.childNodes[c].nodeType&&a++;return 1<a};r.prototype.hasSiblings=r.prototype.h;
function t(b,a){for(var c=null,d=b.parentNode.childNodes.length,e=0;e<d;e++){var f=b.parentNode.childNodes[e];!1===a&&(f=b.parentNode.childNodes[d-1-e]);if(1===f.nodeType){if(f===b)return c;c=f}}return null}function s(b,a){b.i=!1;b.l&&(b.j?b.j=!1:(u(b).forEach(function(c){c!=a&&(c.classList.remove("rsz-selected"),b.c&&b.c())}),v(b,a)))}function u(b){var a=[];b=b.g.querySelectorAll(".rsz-selected");for(var c=0;c<b.length;c++)a.push(b[c]);return a}
r.prototype.select=function(b){b.classList.add("rsz-selected");this.c&&this.c()};function v(b,a){a.classList.toggle("rsz-selected");b.c&&b.c()}function w(b){u(b).forEach(function(a){var b=t(a,!0);b&&a.parentNode.insertBefore(a,b)})}function x(b){u(b).forEach(function(a){var b=t(a,!1);b&&a.parentNode.insertBefore(b,a)})};function y(){var b=document.getElementById("app"),a=this;this.toolbar=new q(b.querySelector("#toolbar"));this.C=new n(b.querySelector("#stage"));this.e=new r(b.querySelector("#stage"));this.u=new k;this.toolbar.r=function(b,d){return a.C.A(b,d)};this.toolbar.q=function(b){return a.e.w(b)};this.toolbar.n=function(){return x(a.e)};this.toolbar.o=function(){return w(a.e)};this.toolbar.p=function(){return m(a.u,u(a.e))};this.e.c=function(){return a.toolbar.v(u(a.e))};this.toolbar.f(4)}
function z(b,a){b.C.B(a).then(function(a){b.e.b(a);b.u.b(a);b.toolbar.b(a)})};window.initResponsizeApp=function(){for(var b=new y,a=document.location.search,a=a.split("+").join(" "),c={},d,e=/[?&]?([^=]+)=([^&]*)/g;d=e.exec(a);)c[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);z(b,c.url||"test/silex/")};
