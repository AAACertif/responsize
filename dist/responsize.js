var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===b?d=d[g]?d[g]:d[g]={}:d[g]=b};function l(){this.G=window.ce.api.CloudExplorer.get("ce-js");this.r=null}f("FileService",l);l.prototype.open=function(){var a=this;return new Promise(function(b,c){a.G.pick(function(c){console.log("my Blob: "+JSON.stringify(c));a.r=c;b(c.url)},function(a){console.log("error "+JSON.stringify(a));c(a)})})};l.prototype.open=l.prototype.open;
l.prototype.save=function(a){var b=this;return new Promise(function(c,d){console.log("fileService save",a,b.r);b.G.write(b.r,a,function(a){console.log("my Blob: "+JSON.stringify(a));b.r=a;c(a.url)},function(a){console.log("error "+JSON.stringify(a));d(a)})})};l.prototype.save=l.prototype.save;function m(a){this.element=a;this.a=a.getElementsByTagName("iframe")[0];this.height=this.width=1;this.F=!0;window.addEventListener("resize",this.f.bind(this))}f("Stage",m);m.prototype.S=function(a,b){this.F=!1;this.width=a;this.height=b;this.f()};m.prototype.setSize=m.prototype.S;m.prototype.ca=function(){return{width:this.width,height:this.height}};m.prototype.getSize=m.prototype.ca;
m.prototype.H=function(){var a=null,b=null,c=null,d=null,g=null;try{g=this.a.contentDocument.querySelectorAll("*")}catch(h){return console.error("Could not acces the iframe content, probably due to a cross domain issue."),{V:800,I:600}}for(var u=0;u<g.length;u++){var k=g[u];if(null===a||k.offsetLeft<a)a=k.offsetLeft;if(null===c||k.offsetTop<c)c=k.offsetTop;k.offsetLeft+k.offsetWidth>b&&(b=k.offsetLeft+k.offsetWidth);k.offsetTop+k.offsetHeight>d&&(d=k.offsetTop+k.offsetHeight)}return{V:b-a,I:d-c}};
m.prototype.getContentSize=m.prototype.H;m.prototype.f=function(){if(this.F){var a=this.H();this.width=a.V;this.height=a.I}this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var a=this.element.offsetWidth,b=this.element.offsetHeight,c=Math.min(1,a/this.width,b/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";b=(b-this.height*c)/2;this.a.style.left=(a-this.width*c)/2+"px";this.a.style.top=b+"px"};m.prototype.redraw=m.prototype.f;
m.prototype.h=function(a){a?this.a.parentNode.classList.add("rsz-loading"):this.a.parentNode.classList.remove("rsz-loading")};m.prototype.setLoading=m.prototype.h;m.prototype.T=function(a){var b=this;return new Promise(function(c,d){b.h(!0);b.a.onload=function(){b.h(!1);b.f();try{c(b.a.contentDocument)}catch(a){console.error("Could not acces the iframe content, probably due to a cross domain issue."),c(null)}};b.a.onerror=function(a){b.h(!1);d(a)};b.a.src=a})};m.prototype.setUrl=m.prototype.T;
m.prototype.$=function(){try{return this.a.contentDocument.documentElement.outerHTML}catch(a){return console.error("Could not acces the iframe content, probably due to a cross domain issue."),null}};m.prototype.getHtml=m.prototype.$;
m.prototype.ia=function(a){var b=this;return new Promise(function(c,d){b.h(!0);b.a.onload=function(){b.h(!1);if(""!==a){b.a.src="";try{b.a.contentDocument.write(a)}catch(d){console.error("Could not acces the iframe content, probably due to a cross domain issue.")}}b.f();try{c(b.a.contentDocument)}catch(h){console.error("Could not acces the iframe content, probably due to a cross domain issue."),c(null)}};b.a.onerror=function(a){b.h(!1);d(a)};b.a.src="about:blank"})};m.prototype.setHtml=m.prototype.ia;f("Device",{oa:0,pa:1,qa:2,ra:3,na:4});var n=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:480,height:320},{name:"tablet",width:769,height:1024},{name:"tablet-h",width:1024,height:769},{name:"desktop",width:1920,height:1080}];f("DeviceData",n);function p(a){var b=this;this.element=a;this.element.querySelector(".open");this.selection=[];this.B=this.J=this.A=this.n=null;this.element.addEventListener("click",function(a){return q(b,a)})}f("Toolbar",p);
function q(a,b){var c=b.target;c.classList.contains("open")&&(a.n&&a.n(),a.element.querySelector(".tooltip.open").classList.remove("visible"));c.classList.contains("save")&&a.A&&a.A();c.classList.contains("clear-formatting")?a.J&&a.selection.forEach(function(b){return a.J(b)}):c.classList.contains("mobile")?a.g(0):c.classList.contains("mobile-h")?a.g(1):c.classList.contains("tablet")?a.g(2):c.classList.contains("tablet-h")?a.g(3):c.classList.contains("desktop")&&a.g(4);b.preventDefault();return!1}
p.prototype.g=function(a){for(var b=this.element.querySelectorAll(".selected"),c=0;c<b.length;c++)b.item(c).classList.remove("selected");this.element.querySelector("."+n[a].name).classList.add("selected");this.B&&this.B(n[a].width,n[a].height)};p.prototype.setDevice=p.prototype.g;p.prototype.Q=function(a){console.log("setSelection");this.selection=a;this.f();this.element.querySelector(".tooltip.open").classList.remove("visible")};p.prototype.setSelection=p.prototype.Q;p.prototype.f=function(){};
p.prototype.redraw=p.prototype.f;function r(a){var b=this;this.toolbar=new p(a.querySelector("#toolbar"));this.U=new m(a.querySelector("#stage"));this.url="";this.toolbar.B=function(a,d){return b.U.S(a,d)};this.toolbar.n=function(){var a=prompt("Website URL",b.url);a&&(window.location.href="?url="+escape(a))};this.toolbar.g(4)}r.prototype.da=function(a){if(a&&a.parentNode&&a.parentNode.childNodes){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b}return!1};
f("App.prototype.hasSiblings",r.prototype.da);r.prototype.ea=function(a){return a&&a.parentNode&&a.parentNode.classList&&a.parentNode.classList.contains("row")};f("App.prototype.isBootstrapCol",r.prototype.ea);r.prototype.n=function(a){var b=this;this.url=a;this.U.T(a).then(function(){b.toolbar.Q([])},function(a){console.error("Error loading website:",a)})};r.prototype.A=function(){};function s(){this.D=[];this.fa=0}f("RszDom",s);function t(a,b){a.D.forEach(function(a){a=b.querySelector("#"+a.id);a.parentNode.removeChild(a)});for(var c=b.querySelectorAll(".rsz-select-candidate, .rsz-selected"),d=0;d<c.length;d++)c[d].classList.remove("rsz-selected"),c[d].classList.remove("rsz-select-candidate")}function v(a,b){a.D.forEach(function(a){return b.querySelector("head").appendChild(a.cloneNode(!0))})}s.prototype.v=function(a,b){b.id="rsz-"+this.fa++;this.D.push(b);a&&a.head.appendChild(b.cloneNode(!0))};
s.prototype.addTempElement=s.prototype.v;function w(){this.e=null;this.d=this.t=!1}f("RszSelection",w);w.prototype.reset=function(a){this.t=!1;x(this,a,!1)};w.prototype.k=function(){this.t=!0;return!1};w.prototype.l=function(a,b){this.t?this.d||(this.d=!0):(y(a),b.classList.add("rsz-select-candidate"));return!1};w.prototype.m=function(a,b,c,d,g){this.t=!1;if(this.d)this.d=!1;else{if(!g){var h=this;this.i(a).forEach(function(a){a!=b&&z(h,a,!1)})}this.select(b);return!0}return!1};
w.prototype.i=function(a){if(a){a=a.querySelectorAll(".rsz-selected");for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}return[]};w.prototype.getSelected=w.prototype.i;function y(a){a=a.querySelectorAll(".rsz-select-candidate");for(var b=0;b<a.length;b++)a[b].classList.remove("rsz-select-candidate")}w.prototype.select=function(a,b){a.classList.contains("rsz-selected")||(a.classList.add("rsz-selected"),!1!==b&&this.e&&this.e())};
function z(a,b,c){b.classList.contains("rsz-selected")&&(b.classList.remove("rsz-selected"),!1!==c&&a.e&&a.e())}function x(a,b,c){a.i(b).forEach(function(b){z(a,b,c)})};function A(){this.q=15;this.e=null;this.d=!1;this.b=null;this.w=-1}f("RszResize",A);A.prototype.k=function(a,b,c,d){a=b.getBoundingClientRect();this.w=B(this,a,c,d);this.b=-1!==this.w?b:null;return!1};
A.prototype.l=function(a,b,c,d,g,h){C(a,B(this,b.getBoundingClientRect(),c,d));if(null!==this.b){this.d||(this.d=!0);a=this.b.getBoundingClientRect();a={left:a.left,right:a.right,top:a.top,bottom:a.bottom};switch(this.w){case 1:a.left=c;break;case 3:a.right=c;break;case 0:a.top=d;break;case 2:a.bottom=d}c=a;h&&(c=h(this.b,c));h=this.b.parentNode.getBoundingClientRect();c&&(this.b.style.left=c.left-h.left+"px",this.b.style.top=c.top-h.top+"px",this.b.style.width=c.right-c.left+"px",this.b.style.height=
c.bottom-c.top+"px");return!0}return!1};A.prototype.m=function(){return this.b&&this.d?(this.d=!1,this.b=null,this.e&&this.e(this.b),!0):!1};function B(a,b,c,d){c-=b.left;d-=b.top;var g=b.right-b.left;b=b.bottom-b.top;var h=-1;c<a.q&&0<c&&d<b&&0<d?h=1:c<g&&c>g-a.q&&d<b&&0<d?h=3:d<a.q&&0<d&&c<g&&0<c?h=0:d<b&&d>b-a.q&&c<g&&0<c&&(h=2);return h}
function C(a,b){switch(b){case 1:case 3:a.body.classList.add("rsz-resize-ew");break;case 0:case 2:a.body.classList.add("rsz-resize-ns");break;case -1:a.body.classList.remove("rsz-resize-ew"),a.body.classList.remove("rsz-resize-ns")}};function D(){this.Y=this.u=this.document=this.N=this.O=null;this.K=this.k.bind(this);this.M=this.m.bind(this);this.L=this.l.bind(this);this.P=this.preventDefault.bind(this);this.c=new w;this.C=new A;this.o=this.j=!1;this.p=new s}f("Wysiwyg",D);D.prototype.ja=function(a){return this.c.e=a};D.prototype.setOnSelect=D.prototype.ja;D.prototype.aa=function(){return this.c.e};D.prototype.getOnSelect=D.prototype.aa;D.prototype.la=function(a){return this.u=a};D.prototype.setSelectFilter=D.prototype.la;
D.prototype.ba=function(){return this.u};D.prototype.getSelectFilter=D.prototype.ba;D.prototype.Z=function(){var a=this.document.documentElement.cloneNode(!0);t(this.p,a);return a.outerHTML};D.prototype.getCleanHtml=D.prototype.Z;
D.prototype.ha=function(a){this.document&&(this.document.removeEventListener("mousedown",this.K),this.document.removeEventListener("mouseup",this.M),this.document.removeEventListener("mousemove",this.L),this.document.removeEventListener("click",this.P,!0),t(this.p,this.document.documentElement));this.c.reset(this.document);this.document=a;this.R(this.j);this.document.addEventListener("mouseup",this.M,!0);this.document.addEventListener("mousedown",this.K);this.document.addEventListener("mousemove",
this.L);this.document.addEventListener("click",this.P,!0);v(this.p,this.document.documentElement)};D.prototype.setDocument=D.prototype.ha;D.prototype.R=function(a){this.j=a};D.prototype.setSelectionMode=D.prototype.R;D.prototype.ka=function(a){this.o=a};D.prototype.setResizeMode=D.prototype.ka;D.prototype.s=function(a){for(;a&&this.u&&!this.u(a);)a=a.parentNode;return a};D.prototype.getBestElement=D.prototype.s;
D.prototype.X=function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",a);this.p.v(this.document,b)};D.prototype.addTempStyle=D.prototype.X;D.prototype.W=function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);this.p.v(this.document,b)};D.prototype.addTempScript=D.prototype.W;D.prototype.preventDefault=function(a){if(this.j||this.o)a.stopPropagation(),a.preventDefault()};
D.prototype.m=function(a){if(this.document){var b=this.s(a.target);b?(this.j&&this.c.m(this.document,b,a.clientX,a.clientY,a.shiftKey)&&this.O&&this.O(),this.o&&(a=this.C.m(this.document,b,a.clientX,a.clientY,a.shiftKey),this.N&&a&&this.N())):x(this.c,this.document)}};D.prototype.k=function(a){if(this.document){var b=this.s(a.target);b&&(this.j&&this.c.k(this.document,b,a.clientX,a.clientY,a.shiftKey),this.o&&this.C.k(this.document,b,a.clientX,a.clientY,a.shiftKey))}};
D.prototype.l=function(a){if(this.document){var b=!1,c=this.s(a.target);c?(this.j&&(b=b||this.c.l(this.document,c,a.clientX,a.clientY,a.shiftKey)),this.o&&(b=b||this.C.l(this.document,c,a.clientX,a.clientY,a.shiftKey,this.Y)),b&&this.preventDefault(a)):(C(this.document,-1),y(this.document))}};D.prototype.i=function(){return this.c.i(this.document)};D.prototype.getSelected=D.prototype.i;D.prototype.ma=function(a){x(this.c,this.document,!1);return this.c.select(a,!1)};D.prototype.setSelected=D.prototype.ma;window.initResponsizeApp=function(){var a=new r(document.getElementById("rsz-app")),b=E();b.url&&setTimeout(function(){return a.n(b.url)},1E3)};window.onerror=function(a,b,c){window.ga("send","Uncaught error",a,b,c)};function E(){for(var a=document.location.search,a=a.split("+").join(" "),b={},c,d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);return b};
//# sourceMappingURL=/responsize.js.map